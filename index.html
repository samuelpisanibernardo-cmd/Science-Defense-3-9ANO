<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Space Invaders - Quiz Cient√≠fico</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }

    #gameCanvas {
      background: #000;
      border: 1px solid #0a0;
    }

    #questionBox {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 30, 0, 0.85);
      padding: 10px;
      border: 1px solid #0f0;
      border-radius: 6px;
      text-align: center;
      width: 90%;
      max-width: 500px;
      color: #0f0;
      font-size: 14px;
    }

    #feedback {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      z-index: 10;
    }

    #controls {
      position: absolute;
      bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      box-sizing: border-box;
    }

    .btn {
      width: 70px;
      height: 70px;
      background: rgba(255,255,255,0.1);
      border: 1px solid #0f0;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: #0f0;
      user-select: none;
      touch-action: manipulation;
      font-weight: bold;
    }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 20px;
    }

    #gameOver {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      padding: 20px;
      border: 2px solid red;
      border-radius: 10px;
      text-align: center;
      display: none;
    }

    #finalScore {
      font-size: 24px;
      color: #0f0;
      margin-top: 10px;
    }

    #restartBtn {
      margin-top: 15px;
      padding: 10px 20px;
      background: #0a0;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }

    #restartBtn:hover {
      background: #0c0;
    }
  </style>
</head>
<body>
  <div id="score">Pontua√ß√£o: 0</div>
  <div id="questionBox">
    <div id="questionText">Carregando pergunta...</div>
    <div id="optionsText"></div>
  </div>
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  
  <div id="feedback"></div>

  <div id="gameOver">
    <div>üéÆ GAME OVER</div>
    <div id="finalScore">Sua pontua√ß√£o: 0</div>
    <button id="restartBtn">Recome√ßar</button>
  </div>

  <div id="controls">
    <div class="btn" id="leftBtn">‚Üê</div>
    <div class="btn" id="rightBtn">‚Üí</div>
    <div class="btn" id="fireBtn">üî´</div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreDisplay = document.getElementById('score');
    const questionText = document.getElementById('questionText');
    const optionsText = document.getElementById('optionsText');
    const feedbackEl = document.getElementById('feedback');
    const gameOverDisplay = document.getElementById('gameOver');
    const finalScoreDisplay = document.getElementById('finalScore');
    const restartBtn = document.getElementById('restartBtn');
    const leftBtn = document.getElementById('leftBtn');
    const rightBtn = document.getElementById('rightBtn');
    const fireBtn = document.getElementById('fireBtn');

    // Jogador - Nave Espacial Detalhada
    let player = {
      x: canvas.width / 2 - 20,
      y: canvas.height - 50,
      width: 40,
      height: 30,
      speed: 5,
      dx: 0,
      pulse: 0 // Para efeito de luz nos propulsores
    };

    let bullets = [];
    const bulletSpeed = 7;

    // Sistema de part√≠culas para explos√£o realista
    let particles = [];

    let enemies = [];
    const letters = ['A', 'B', 'C', 'D', 'E'];

    // üåü BANCO DE PERGUNTAS ‚Äî 35 QUEST√ïES DE CI√äNCIAS DO 9¬∫ ANO
    const questions = [
      // Biologia
      { q: "Qual √© a principal fun√ß√£o da mitoc√¥ndria?", o: ["A) Produzir prote√≠nas", "B) Armazenar DNA", "C) Produzir energia (ATP)", "D) Controlar a entrada de subst√¢ncias", "E) Produzir horm√¥nios"], c: 'C' },
      { q: "O que √© um ecossistema?", o: ["A) Um grupo de animais", "B) Somente plantas", "C) Conjunto de seres vivos e seu ambiente", "D) Apenas fatores abi√≥ticos", "E) Somente solo e √°gua"], c: 'C' },
      { q: "Qual √© a unidade b√°sica da vida?", o: ["A) C√©lula", "B) Tecido", "C) √ìrg√£o", "D) Sistema", "E) Organismo"], c: 'A' },
      { q: "Qual processo permite √†s plantas produzirem seu pr√≥prio alimento?", o: ["A) Respira√ß√£o", "B) Digest√£o", "C) Fotoss√≠ntese", "D) Fermenta√ß√£o", "E) Transpira√ß√£o"], c: 'C' },
      { q: "Em qual √≥rg√£o do corpo humano ocorre a maior parte da digest√£o dos alimentos?", o: ["A) Est√¥mago", "B) F√≠gado", "C) Intestino delgado", "D) Intestino grosso", "E) Es√¥fago"], c: 'C' },
      { q: "Qual √© a fun√ß√£o dos gl√≥bulos vermelhos?", o: ["A) Defender o corpo", "B) Coagular o sangue", "C) Transportar oxig√™nio", "D) Produzir anticorpos", "E) Regular a temperatura"], c: 'C' },
      { q: "O que √© hereditariedade?", o: ["A) A capacidade de se adaptar ao ambiente", "B) A transmiss√£o de caracter√≠sticas dos pais para os filhos", "C) O processo de muta√ß√£o gen√©tica", "D) A forma√ß√£o de novas esp√©cies", "E) A reprodu√ß√£o assexuada"], c: 'B' },
      { q: "Qual √© o principal g√°s respons√°vel pelo efeito estufa?", o: ["A) Oxig√™nio", "B) Nitrog√™nio", "C) Di√≥xido de carbono", "D) Hidrog√™nio", "E) Metano"], c: 'C' },
      { q: "Como se chama o processo em que plantas perdem √°gua na forma de vapor?", o: ["A) Evapora√ß√£o", "B) Condensa√ß√£o", "C) Transpira√ß√£o", "D) Fotoss√≠ntese", "E) Respira√ß√£o"], c: 'C' },
      { q: "Qual √© o papel dos decompositores na cadeia alimentar?", o: ["A) Produzir alimento", "B) Consumir produtores", "C) Degradar mat√©ria org√¢nica morta", "D) Capturar luz solar", "E) Produzir oxig√™nio"], c: 'C' },

      // Qu√≠mica
      { q: "Qual √© a f√≥rmula qu√≠mica da √°gua?", o: ["A) H2O2", "B) HO", "C) H2O", "D) H3O", "E) OH2"], c: 'C' },
      { q: "O que √© uma liga√ß√£o i√¥nica?", o: ["A) Compartilhamento de el√©trons", "B) Troca de el√©trons entre √°tomos", "C) Atra√ß√£o entre mol√©culas polares", "D) Liga√ß√£o por for√ßas de Van der Waals", "E) Liga√ß√£o por pr√≥tons"], c: 'B' },
      { q: "Qual √© o s√≠mbolo qu√≠mico do ouro?", o: ["A) Ag", "B) Fe", "C) Au", "D) Cu", "E) Pb"], c: 'C' },
      { q: "O que acontece quando um √°cido reage com uma base?", o: ["A) Forma-se um g√°s", "B) Forma-se um sal e √°gua", "C) Libera calor sem rea√ß√£o", "D) Forma-se um metal", "E) N√£o ocorre rea√ß√£o"], c: 'B' },
      { q: "Qual √© o estado f√≠sico do merc√∫rio √† temperatura ambiente?", o: ["A) S√≥lido", "B) L√≠quido", "C) Gasoso", "D) Plasma", "E) Cristalino"], c: 'B' },
      { q: "O que √© uma subst√¢ncia pura?", o: ["A) Mistura de dois ou mais elementos", "B) Subst√¢ncia com composi√ß√£o fixa e propriedades definidas", "C) Solu√ß√£o aquosa", "D) Mistura heterog√™nea", "E) Elemento radioativo"], c: 'B' },
      { q: "Qual √© o n√∫mero at√¥mico do oxig√™nio?", o: ["A) 6", "B) 8", "C) 16", "D) 14", "E) 12"], c: 'B' },
      { q: "O que caracteriza uma rea√ß√£o qu√≠mica?", o: ["A) Mudan√ßa de estado f√≠sico", "B) Forma√ß√£o de novas subst√¢ncias", "C) Altera√ß√£o de temperatura", "D) Mudan√ßa de cor sem transforma√ß√£o", "E) Apenas mudan√ßa de volume"], c: 'B' },
      { q: "Qual √© a f√≥rmula do g√°s carb√¥nico?", o: ["A) CO", "B) CO2", "C) C2O", "D) H2CO3", "E) O2C"], c: 'B' },
      { q: "O que √© uma solu√ß√£o √°cida?", o: ["A) Tem pH maior que 7", "B) Tem pH igual a 7", "C) Tem pH menor que 7", "D) N√£o conduz eletricidade", "E) √â sempre l√≠quida"], c: 'C' },

      // F√≠sica
      { q: "Qual √© a unidade de medida da for√ßa no Sistema Internacional?", o: ["A) Joule", "B) Pascal", "C) Newton", "D) Watt", "E) Volt"], c: 'C' },
      { q: "O que √© in√©rcia?", o: ["A) A for√ßa que freia um objeto", "B) A tend√™ncia de um corpo manter seu estado de repouso ou movimento", "C) A acelera√ß√£o de um corpo", "D) A gravidade da Terra", "E) A resist√™ncia do ar"], c: 'B' },
      { q: "Qual √© a velocidade da luz no v√°cuo?", o: ["A) 300.000 km/h", "B) 30.000 km/s", "C) 300.000 km/s", "D) 3.000 km/s", "E) 3.000 m/s"], c: 'C' },
      { q: "O que √© energia potencial gravitacional?", o: ["A) Energia de movimento", "B) Energia armazenada por causa da posi√ß√£o em um campo gravitacional", "C) Energia do calor", "D) Energia el√©trica", "E) Energia sonora"], c: 'B' },
      { q: "Qual √© a lei que diz que a a√ß√£o e a rea√ß√£o t√™m mesma intensidade e dire√ß√£o, mas sentidos opostos?", o: ["A) Lei da Gravita√ß√£o Universal", "B) Primeira Lei de Newton", "C) Segunda Lei de Newton", "D) Terceira Lei de Newton", "E) Lei de Ohm"], c: 'D' },
      { q: "O que √© corrente el√©trica?", o: ["A) A diferen√ßa de potencial", "B) O fluxo de el√©trons em um condutor", "C) A resist√™ncia de um material", "D) A quantidade de carga em repouso", "E) A pot√™ncia el√©trica"], c: 'B' },
      { q: "Qual √© a unidade de medida da energia?", o: ["A) Watt", "B) Volt", "C) Joule", "D) Amp√®re", "E) Ohm"], c: 'C' },
      { q: "O que √© uma onda mec√¢nica?", o: ["A) Onda que n√£o precisa de meio para se propagar", "B) Onda que se propaga apenas no v√°cuo", "C) Onda que precisa de um meio material para se propagar", "D) Onda eletromagn√©tica", "E) Onda de luz"], c: 'C' },
      { q: "O que acontece com a press√£o em um l√≠quido quando aumentamos a profundidade?", o: ["A) Diminui", "B) Permanece constante", "C) Aumenta", "D) Varia aleatoriamente", "E) Se torna zero"], c: 'C' },
      { q: "Qual √© a f√≥rmula da energia cin√©tica?", o: ["A) E = mgh", "B) E = mc¬≤", "C) E = ¬Ωmv¬≤", "D) E = F √ó d", "E) E = qV"], c: 'C' },

      // Ci√™ncias da Terra
      { q: "Qual √© a camada da Terra onde ocorrem os terremotos?", o: ["A) N√∫cleo", "B) Manto", "C) Crosta", "D) Atmosfera", "E) Hidrosfera"], c: 'C' },
      { q: "O que √© a eros√£o?", o: ["A) Forma√ß√£o de montanhas", "B) Ac√∫mulo de sedimentos", "C) Desgaste e transporte de rochas e solos", "D) Vulcanismo", "E) Forma√ß√£o de foss√©is"], c: 'C' },
      { q: "Qual √© o principal g√°s da atmosfera terrestre?", o: ["A) Oxig√™nio", "B) Di√≥xido de carbono", "C) Nitrog√™nio", "D) Arg√¥nio", "E) Hidrog√™nio"], c: 'C' },
      { q: "O que √© o ciclo da √°gua?", o: ["A) A transforma√ß√£o de √°gua em vapor", "B) O movimento cont√≠nuo da √°gua entre os oceanos, atmosfera e terra", "C) A precipita√ß√£o de chuva", "D) A filtra√ß√£o da √°gua no solo", "E) A evapora√ß√£o somente"], c: 'B' },
      { q: "O que causa as esta√ß√µes do ano?", o: ["A) A rota√ß√£o da Terra", "B) A mudan√ßa na dist√¢ncia da Terra ao Sol", "C) A inclina√ß√£o do eixo da Terra e sua transla√ß√£o", "D) A atividade solar", "E) A gravidade da Lua"], c: 'C' }
    ];

    let score = 0;
    let currentQuestion = null;
    let gameRunning = true;

    // Mostrar feedback
    function showFeedback(text, color = '#fff') {
      feedbackEl.textContent = text;
      feedbackEl.style.color = color;
      feedbackEl.style.opacity = '1';
      setTimeout(() => {
        feedbackEl.style.opacity = '0';
      }, 1200);
    }

    // Criar explos√£o realista com part√≠culas
    function createExplosion(x, y) {
      const colors = ['#ff9000', '#ff5500', '#ff2200', '#ffffff', '#ffcc00'];
      const particleCount = 80;

      for (let i = 0; i < particleCount; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 4 + 1;
        const size = Math.random() * 4 + 1;
        const life = Math.random() * 60 + 30;

        particles.push({
          x: x,
          y: y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          radius: size,
          color: colors[Math.floor(Math.random() * colors.length)],
          life: life,
          maxLife: life
        });
      }
    }

    // Atualizar part√≠culas
    function updateParticles() {
      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.05;
        p.life--;

        if (p.life <= 0) {
          particles.splice(i, 1);
        }
      }
    }

    // Desenhar part√≠culas
    function drawParticles() {
      for (const p of particles) {
        const alpha = p.life / p.maxLife;
        ctx.globalAlpha = alpha;
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.globalAlpha = 1;
    }

    // Nave espacial detalhada
    function drawPlayer() {
      const x = player.x;
      const y = player.y;

      // Sombra suave abaixo da nave
      ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
      ctx.shadowBlur = 8;
      ctx.shadowOffsetY = 4;
      ctx.fillStyle = '#111';
      ctx.beginPath();
      ctx.ellipse(x + player.width / 2, y + player.height + 10, 20, 8, 0, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowBlur = 0;

      // Corpo da nave (gradiente prateado)
      const gradient = ctx.createLinearGradient(x, y, x, y + player.height);
      gradient.addColorStop(0, '#e0e0ff');
      gradient.addColorStop(0.5, '#ffffff');
      gradient.addColorStop(1, '#b0b0ff');
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.moveTo(x + player.width / 2, y);
      ctx.lineTo(x, y + player.height);
      ctx.lineTo(x + player.width, y + player.height);
      ctx.closePath();
      ctx.fill();

      // Asas (com brilho)
      ctx.strokeStyle = '#ffffff';
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.moveTo(x, y + player.height - 3);
      ctx.lineTo(x - 8, y + player.height + 12);
      ctx.lineTo(x, y + player.height);
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(x + player.width, y + player.height - 3);
      ctx.lineTo(x + player.width + 8, y + player.height + 12);
      ctx.lineTo(x + player.width, y + player.height);
      ctx.stroke();

      // Luzes dos propulsores (piscando)
      player.pulse += 0.1;
      const pulseIntensity = 0.5 + 0.5 * Math.sin(player.pulse);
      ctx.fillStyle = `rgba(0, 180, 255, ${pulseIntensity})`;
      ctx.beginPath();
      ctx.moveTo(x + 8, y + player.height);
      ctx.lineTo(x + 12, y + player.height + 10);
      ctx.lineTo(x + 16, y + player.height);
      ctx.closePath();
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(x + player.width - 8, y + player.height);
      ctx.lineTo(x + player.width - 12, y + player.height + 10);
      ctx.lineTo(x + player.width - 16, y + player.height);
      ctx.closePath();
      ctx.fill();

      // Antena (com luz verde)
      ctx.strokeStyle = '#0f0';
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.moveTo(x + player.width / 2, y - 5);
      ctx.lineTo(x + player.width / 2, y - 12);
      ctx.stroke();

      ctx.fillStyle = '#0f0';
      ctx.beginPath();
      ctx.arc(x + player.width / 2, y - 13, 2, 0, Math.PI * 2);
      ctx.fill();
    }

    function loadQuestion() {
      const q = questions[Math.floor(Math.random() * questions.length)];
      currentQuestion = q;
      questionText.textContent = q.q;
      optionsText.innerHTML = q.o.join('<br>');
    }

    function spawnEnemies() {
      enemies = [];
      for (let i = 0; i < 5; i++) {
        enemies.push({
          x: 30 + i * 70,
          y: Math.random() * 100,
          width: 30,
          height: 30,
          speedX: (Math.random() - 0.5) * 2,
          speedY: 0.4 + Math.random() * 0.3,
          letter: letters[i]
        });
      }
    }

    function drawBullets() {
      for (let b of bullets) {
        ctx.fillStyle = '#0f0';
        ctx.beginPath();
        ctx.arc(b.x, b.y, 3, 0, Math.PI * 2);
        ctx.fill();
        ctx.strokeStyle = '#0ff';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(b.x, b.y);
        ctx.lineTo(b.x, b.y + 12);
        ctx.stroke();
      }
    }

    function drawEnemy(e) {
      ctx.fillStyle = '#0a0';
      ctx.beginPath();
      ctx.arc(e.x + e.width / 2, e.y + e.height / 2, e.width / 2, 0, Math.PI * 2);
      ctx.fill();

      ctx.strokeStyle = '#0a0';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(e.x + e.width / 3, e.y + e.height / 3);
      ctx.lineTo(e.x + e.width / 3 - 6, e.y + e.height / 4 - 4);
      ctx.moveTo(e.x + 2 * e.width / 3, e.y + e.height / 3);
      ctx.lineTo(e.x + 2 * e.width / 3 + 6, e.y + e.height / 4 - 4);
      ctx.stroke();

      ctx.fillStyle = '#000';
      ctx.beginPath();
      ctx.arc(e.x + e.width / 3, e.y + e.height / 3, 4, 0, Math.PI * 2);
      ctx.arc(e.x + 2 * e.width / 3, e.y + e.height / 3, 4, 0, Math.PI * 2);
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(e.x + e.width / 4, e.y + 2 * e.height / 3);
      ctx.lineTo(e.x + 3 * e.width / 4, e.y + 2 * e.height / 3);
      ctx.stroke();

      ctx.font = 'bold 14px Arial';
      ctx.fillStyle = '#fff';
      ctx.textAlign = 'center';
      ctx.fillText(e.letter, e.x + e.width / 2, e.y + e.height / 2 + 5);
    }

    function updatePlayer() {
      player.x += player.dx;
      if (player.x < 0) player.x = 0;
      if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
    }

    function updateBullets() {
      for (let i = bullets.length - 1; i >= 0; i--) {
        bullets[i].y -= bulletSpeed;
        if (bullets[i].y < 0) bullets.splice(i, 1);
      }
    }

    function updateEnemies() {
      for (let e of enemies) {
        e.x += e.speedX;
        if (e.x <= 0 || e.x + e.width >= canvas.width) e.speedX *= -1;
        if (e.y < player.y) e.y += e.speedY;

        if (
          e.x < player.x + player.width &&
          e.x + e.width > player.x &&
          e.y < player.y + player.height &&
          e.y + e.height > player.y
        ) {
          createExplosion(player.x + player.width / 2, player.y + player.height / 2);
          showFeedback("Errado! Fim de jogo.", 'red');
          setTimeout(endGame, 600);
        }
      }
    }

    function detectCollisions() {
      for (let b of bullets) {
        for (let i = enemies.length - 1; i >= 0; i--) {
          let e = enemies[i];
          if (
            b.x < e.x + e.width &&
            b.x + 3 > e.x &&
            b.y < e.y + e.height &&
            b.y + 12 > e.y
          ) {
            bullets.splice(bullets.indexOf(b), 1);
            createExplosion(e.x + e.width / 2, e.y + e.height / 2);

            if (e.letter === currentQuestion.c) {
              showFeedback("Correto!", '#0f0');
              score += 100;
              scoreDisplay.textContent = `Pontua√ß√£o: ${score}`;
              setTimeout(() => {
                loadQuestion();
                spawnEnemies();
              }, 600);
            } else {
              showFeedback("Errado! Fim de jogo.", 'red');
              setTimeout(endGame, 600);
            }
          }
        }
      }
    }

    function endGame() {
      gameRunning = false;
      finalScoreDisplay.textContent = `Sua pontua√ß√£o: ${score}`;
      gameOverDisplay.style.display = 'block';
    }

    function resetGame() {
      player.x = canvas.width / 2 - 20;
      player.dx = 0;
      bullets = [];
      particles = [];
      score = 0;
      scoreDisplay.textContent = 'Pontua√ß√£o: 0';
      gameOverDisplay.style.display = 'none';
      gameRunning = true;
      loadQuestion();
      spawnEnemies();
      gameLoop();
    }

    function gameLoop() {
      if (!gameRunning) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      drawPlayer();
      drawBullets();
      enemies.forEach(drawEnemy);
      drawParticles();

      updatePlayer();
      updateBullets();
      updateEnemies();
      detectCollisions();
      updateParticles();

      requestAnimationFrame(gameLoop);
    }

    // Controles com setinhas (cetinhas)
    function shoot() {
      if (!gameRunning) return;
      bullets.push({ x: player.x + player.width / 2, y: player.y });
    }

    // Bot√µes de seta e tiro
    leftBtn.addEventListener('touchstart', e => {
      e.preventDefault();
      player.dx = -player.speed;
    });
    leftBtn.addEventListener('touchend', e => {
      e.preventDefault();
      if (player.dx < 0) player.dx = 0;
    });

    rightBtn.addEventListener('touchstart', e => {
      e.preventDefault();
      player.dx = player.speed;
    });
    rightBtn.addEventListener('touchend', e => {
      e.preventDefault();
      if (player.dx > 0) player.dx = 0;
    });

    fireBtn.addEventListener('touchstart', e => {
      e.preventDefault();
      shoot();
    });

    // Suporte para cliques (desktop e alguns navegadores)
    leftBtn.addEventListener('mousedown', () => { player.dx = -player.speed; });
    leftBtn.addEventListener('mouseup', () => { if (player.dx < 0) player.dx = 0; });
    rightBtn.addEventListener('mousedown', () => { player.dx = player.speed; });
    rightBtn.addEventListener('mouseup', () => { if (player.dx > 0) player.dx = 0; });
    fireBtn.addEventListener('mousedown', shoot);

    restartBtn.addEventListener('click', resetGame);

    // Iniciar jogo
    loadQuestion();
    spawnEnemies();
    gameLoop();
  </script>
</body>
</html>